Summary: RVM library development files
Name: @PACKAGE@-cygwin32
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/@PACKAGE@-@VERSION@.tar.gz
Copyright: LGPL
BuildRoot: /usr/src/redhat/BUILD/@PACKAGE@-@VERSION@/Root
Group: Development/Libraries
%description
Headers and static libraries for developing programs using the RVM library.
The RVM library is used by the Coda distributed filesystem.

%changelog
* Tue Oct 26 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the rvm library.
	
%prep
%setup -n @PACKAGE@-@VERSION@

%build
./configure --prefix=/usr/gnuwin32 --target=nt --disable-shared
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr/gnuwin32 install

rm -f /tmp/@PACKAGE@-win32-bin-@VERSION@.zip
mkdir -p $RPM_BUILD_ROOT/win-bins
mv $RPM_BUILD_ROOT/usr/gnuwin32/sbin/rvmutl.exe $RPM_BUILD_ROOT/win-bins
mv $RPM_BUILD_ROOT/usr/gnuwin32/sbin/rdsinit.exe $RPM_BUILD_ROOT/win-bins
cd $RPM_BUILD_ROOT/win-bins
gnuwin32strip *
zip /tmp/@PACKAGE@-win32-bin-@VERSION@.zip *

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/gnuwin32/lib/librvm.la
/usr/gnuwin32/lib/librvm.a
/usr/gnuwin32/lib/librvmlwp.la
/usr/gnuwin32/lib/librvmlwp.a
/usr/gnuwin32/lib/libseg.la
/usr/gnuwin32/lib/libseg.a
/usr/gnuwin32/lib/librds.la
/usr/gnuwin32/lib/librds.a
/usr/gnuwin32/lib/librdslwp.la
/usr/gnuwin32/lib/librdslwp.a
%dir /usr/gnuwin32/include/rvm
/usr/gnuwin32/include/rvm/rvm.h
/usr/gnuwin32/include/rvm/rvm_statistics.h
/usr/gnuwin32/include/rvm/rvm_segment.h
/usr/gnuwin32/include/rvm/rds.h
