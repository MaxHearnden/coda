Summary: RPC2 library development files (cygwin32 cross compilation)
Name: @PACKAGE@-cygwin32
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/@PACKAGE@-@VERSION@.tar.gz
Copyright: LGPL
BuildRoot: /usr/src/redhat/BUILD/@PACKAGE@-@VERSION@/Root
Group: Development/Libraries
%description
Headers and static libraries for developing programs using the RPC2 library.
These files have been built using the cygwin32 cross compiler, and are
intended to be used with the cygwin32 cross compilation package as found on
the Coda ftp site.

%changelog
* Thu Oct 28 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the rpc2 library.
	
%prep
%setup -n @PACKAGE@-@VERSION@

%build
./configure --prefix=/usr/gnuwin32 --target=nt
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr/gnuwin32 install

rm -f /tmp/@PACKAGE@-win32-bin-@VERSION@.zip
mkdir -p $RPM_BUILD_ROOT/win-bins
mv $RPM_BUILD_ROOT/usr/gnuwin32/bin/filcon.exe $RPM_BUILD_ROOT/win-bins
#mv $RPM_BUILD_ROOT/usr/gnuwin32/lib/libfail-@DLL_VERSION@.dll $RPM_BUILD_ROOT/win-bins
#mv $RPM_BUILD_ROOT/usr/gnuwin32/lib/librpc2-@DLL_VERSION@.dll $RPM_BUILD_ROOT/win-bins
#mv $RPM_BUILD_ROOT/usr/gnuwin32/lib/libse-@DLL_VERSION@.dll $RPM_BUILD_ROOT/win-bins
cd $RPM_BUILD_ROOT/win-bins
/usr/bin/gnuwin32strip *
zip /tmp/@PACKAGE@-win32-bin-@VERSION@.zip *

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/gnuwin32/bin/rp2gen
/usr/gnuwin32/lib/libfail.a
/usr/gnuwin32/lib/libfail.la
/usr/gnuwin32/lib/librpc2.a
/usr/gnuwin32/lib/librpc2.la
/usr/gnuwin32/lib/libse.a
/usr/gnuwin32/lib/libse.la
%dir /usr/gnuwin32/include/rpc2
/usr/gnuwin32/include/rpc2/errors.h
/usr/gnuwin32/include/rpc2/errorsdefs.h
/usr/gnuwin32/include/rpc2/fail.h
/usr/gnuwin32/include/rpc2/fcon.h
/usr/gnuwin32/include/rpc2/multi.h
/usr/gnuwin32/include/rpc2/rpc2.h
/usr/gnuwin32/include/rpc2/rpc2_addrinfo.h
/usr/gnuwin32/include/rpc2/se.h
/usr/gnuwin32/include/rpc2/sftp.h

