dnl Process this file with autoconf to produce a configure script

dnl Initialization
AC_INIT(src/lwp.c)
CODA_SETUP_BUILD
AM_INIT_AUTOMAKE(lwp, 1.0)
AM_CONFIG_HEADER(config.h)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CPP
AC_PROG_RANLIB
AC_CHECK_PROG(AR, ar, ar)
export AR
AC_CHECK_PROG(AS, as, as)
AM_PROG_INSTALL
AC_PROG_MAKE_SET
AM_PROG_LIBTOOL
CODA_PATCH_LIBTOOL

dnl Checks for libraries.
AC_CHECK_LIB(pthread, pthread_create, [LIBPTHREAD="-lpthread"])
AC_SUBST(LIBPTHREAD)
AM_CONDITIONAL(pthread, test x$LIBPTHREAD != x)

dnl Checks for header files.
AC_CHECK_HEADERS(search.h)

dnl Checks for typedefs.
dnl Checks for compiler characteristics.

dnl Checks for library functions.
AC_FUNC_MMAP
CODA_FUNC_INSQUE

dnl Checks for system services.
AM_CYGWIN32

dnl Generate output files
AC_OUTPUT(Makefile include/Makefile include/lwp/Makefile src/Makefile src-pt/Makefile pkgs/Makefile pkgs/lwp.spec pkgs/lwp-nt.spec pkgs/lwp-dos.spec)

