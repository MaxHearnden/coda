Summary: LWP thread library
Name: @PACKAGE@
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/%{name}-%{version}.tar.gz
License: LGPL
Group: Development/Libraries
BuildRoot: %{_builddir}/%{name}-%{version}/Root
%description
The LWP userspace threads library. The LWP threads library is used by the Coda
distributed filesystem, RVM (a persistent VM library), and RPC2/SFTP (remote
procedure call library)

%package devel
Summary: LWP thread library development files
Group: Development/Libraries
%description devel
Headers and static libraries for developing programs using the LWP userspace
threads library. The LWP threads library is used by the Coda distributed
filesystem, RVM (a persistent VM library), and RPC2/SFTP (a remote procedure
call library)

%changelog
* Mon Oct 25 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the lwp library.

%prep
%setup -n %{name}-%{version}

%build
export CFLAGS="${CFLAGS} -Wall"
./configure --prefix=/usr
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr install
chmod 755 $RPM_BUILD_ROOT/usr/lib/liblwp.so.@LINUX_VERSION@

%clean
rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig

%files
%defattr(-,root,root)
/usr/lib/liblwp.so.@LINUX_VERSION@
/usr/lib/liblwp.so.@MAJOR_VERSION@

%files devel
%defattr(-,root,root)
/usr/lib/liblwp.la
/usr/lib/liblwp.a
/usr/lib/liblwp.so
%dir /usr/include/lwp
/usr/include/lwp/lock.h
/usr/include/lwp/lwp.h
/usr/include/lwp/timer.h

