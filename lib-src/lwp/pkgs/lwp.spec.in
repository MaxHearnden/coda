Name: @PACKAGE@
Version: @VERSION@
Release: 1
Summary: LWP userspace threads library

Group: System Environment/Libraries
License: LGPLv2
URL: http://www.coda.cs.cmu.edu/
Source0: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/%{name}-%{version}.tar.gz

BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
BuildRequires: libtool pkgconfig

%description
The LWP threads library is used by the Coda distributed filesystem,
RVM (a persistent VM library), and RPC2/SFTP (remote procedure call
library)


%package devel
Summary: Development files for %{name}
Group: Development/Libraries
Requires: %{name} = %{version}-%{release}

%description devel
The %{name}-devel package contains libraries and header files for
developing applications that use %{name}.


%prep
%setup -q

%build
%configure --disable-static
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT
find $RPM_BUILD_ROOT -name '*.la' -exec rm -f {} ';'

%clean
rm -rf $RPM_BUILD_ROOT


%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig


%files
%defattr(-,root,root,-)
%doc COPYING AUTHORS README NEWS
%{_libdir}/*.so.*


%files devel
%defattr(-,root,root,-)
%{_includedir}/lwp
%{_libdir}/*.so
%{_libdir}/pkgconfig/*

