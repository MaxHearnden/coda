Summary: LWP thread library development files (cygwin32 cross compilation)
Name: @PACKAGE@-cygwin32
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/@PACKAGE@-@VERSION@.tar.gz
Copyright: LGPL
BuildRoot: /usr/src/redhat/BUILD/@PACKAGE@-@VERSION@/Root
Group: Development/Libraries
%description
Headers and static libraries for developing programs using the LWP userspace
threads library. The LWP threads library is used by the Coda distributed
filesystem, RVM (a persistent VM library), and RPC2/SFTP (a remote procedure
call library)
These files have been built using the cygwin32 cross compiler, and are
intended to be used with the cygwin32 cross compilation package as found on
the Coda ftp site.

%changelog
* Mon Oct 25 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the lwp library.
	
%prep
%setup -n @PACKAGE@-@VERSION@

%build
./configure --prefix=/usr/gnuwin32 --target=nt
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr/gnuwin32 install

rm -f /tmp/@PACKAGE@-win32-bin-@VERSION@.zip
mkdir -p $RPM_BUILD_ROOT/win-bins
mv $RPM_BUILD_ROOT/usr/gnuwin32/lib/liblwp-@DLL_VERSION@.dll $RPM_BUILD_ROOT/win-bins
cd $RPM_BUILD_ROOT/win-bins
/usr/bin/gnuwin32strip *
zip /tmp/@PACKAGE@-win32-bin-@VERSION@.zip *

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/gnuwin32/lib/liblwp.la
/usr/gnuwin32/lib/liblwp.a
%dir /usr/gnuwin32/include/lwp
/usr/gnuwin32/include/lwp/lock.h
/usr/gnuwin32/include/lwp/lwp.h
/usr/gnuwin32/include/lwp/timer.h

