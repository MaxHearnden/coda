Summary: LWP thread library development files (cross-compilation with djgpp)
Name: @PACKAGE@-djgpp-mmap
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/@PACKAGE@-@VERSION@.tar.gz
Copyright: LGPL
BuildRoot: /usr/src/redhat/BUILD/@PACKAGE@-@VERSION@/Root
Group: Development/Libraries
%description
Headers and static libraries for developing programs using the LWP userspace
threads library. The LWP threads library is used by the Coda distributed
filesystem, RVM (a persistent VM library), and RPC2/SFTP (a remote procedure
call library)
These files are have been compiled with and for the djgpp + djgpp-win95ext
dpmi target cross compilation tools as packaged on the Coda ftp site.

%changelog
* Mon Oct 25 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the lwp library.
	
%prep
%setup -n @PACKAGE@-@VERSION@

%build
./configure --prefix=/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1 --target=win95
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1 install

# Why is the djgpp library search path so weird?
mv $RPM_BUILD_ROOT/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/lib/liblwp.* $RPM_BUILD_ROOT/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/liblwp.la
/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/liblwp.a
%dir /usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/include/lwp
/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/include/lwp/lock.h
/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/include/lwp/lwp.h
/usr/lib/gcc-lib/i386-go32w95mmap-msdos/2.7.2.1/include/lwp/timer.h

